{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({position, delay});        \n      } else {\n        reject({position, delay});        \n      }\n    }, delay);\n  });\n\n  return promise;\n}\n\nfunction getValidationMessage(name, value) {\n  return `'${name}' must be not empty and more than ${value}!`;\n} \n\nconst DISABLED = \"disabled\";\nconst elements = {\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  button: document.querySelector('button')\n}\n\nfunction showValidationAlert(message) {\n    iziToast.show({\n        title: '⛔',\n        message: message,\n        messageColor: 'white',\n        backgroundColor: 'red',\n        timeout: 5000,\n        position: 'center'\n    });\n}\n\nfunction showPromiseAlert(message, backgroundColor) {\n  iziToast.show({\n      message: message,\n      backgroundColor: backgroundColor,\n      position: 'topRight'\n  });\n}\n\nfunction isInputValid({ delay, step, amount }) {\n  let errorMessage = \"\";\n\n  if (!delay || delay < 0) {\n    errorMessage += getValidationMessage(\"delay\", -1) + \"<br>\"\n  }\n  \n  if (!step || step < 0) {\n    errorMessage += getValidationMessage(\"step\", -1) + \"<br>\"\n  }\n  \n  if (!amount || amount <= 0) {\n    errorMessage += getValidationMessage(\"amount\", 0) + \"<br>\"\n  }\n  \n  if (errorMessage.length === 0) {\n    return true;\n  } else {\n    showValidationAlert(errorMessage);\n    return false;\n  }\n}\n\nfunction cleanUserInput() {\n  elements.delay.value = '';\n  elements.step.value = '';\n  elements.amount.value = '';\n}\n\nfunction temporaryDisableCreateBtn() {\n  const btn = elements.button;\n  const time = Number(elements.delay.value) + Number(elements.step.value) * Number(elements.amount.value);\n  console.log(time);\n  btn.setAttribute(DISABLED, \"\");\n  setTimeout(() => {\n    btn.removeAttribute(DISABLED);\n  }, time);\n}\n\nconst onButtonClick = (evt) => {\n  evt.preventDefault();\n  \n  const userInput = {\n    delay: elements.delay.value,\n    step: elements.step.value,\n    amount: elements.amount.value\n  }\n\n  if (isInputValid(userInput)) {\n    temporaryDisableCreateBtn();\n    cleanUserInput();\n\n    for (let position = 1; position <= Number(userInput.amount); position += 1) {\n      const delay = Number(userInput.delay) + (position - 1) * Number(userInput.step);\n      createPromise(position, delay)\n        .then(({ position, delay }) => {\n          showPromiseAlert(`✅ Fulfilled promise ${position} in ${delay}ms`, 'lime');\n        })\n        .catch(({ position, delay }) => {\n          showPromiseAlert(`❌ Rejected promise ${position} in ${delay}ms`, 'tomato');\n        });\n    }\n  }\n}\n\nelements.button.addEventListener('click', onButtonClick);\n"],"names":["createPromise","position","delay","shouldResolve","resolve","reject","getValidationMessage","name","value","DISABLED","elements","showValidationAlert","message","iziToast","showPromiseAlert","backgroundColor","isInputValid","step","amount","errorMessage","cleanUserInput","temporaryDisableCreateBtn","btn","time","onButtonClick","evt","userInput"],"mappings":"wIAIA,SAASA,EAAcC,EAAUC,EAAO,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GAYtC,OAVgB,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC/C,WAAW,IAAM,CACXF,EACFC,EAAQ,CAAC,SAAAH,EAAU,MAAAC,CAAK,CAAC,EAEzBG,EAAO,CAAC,SAAAJ,EAAU,MAAAC,CAAK,CAAC,CAE3B,EAAEA,CAAK,CACZ,CAAG,CAGH,CAEA,SAASI,EAAqBC,EAAMC,EAAO,CACzC,MAAO,IAAID,sCAAyCC,IACtD,CAEA,MAAMC,EAAW,WACXC,EAAW,CACf,MAAO,SAAS,cAAc,gBAAgB,EAC9C,KAAM,SAAS,cAAc,eAAe,EAC5C,OAAQ,SAAS,cAAc,iBAAiB,EAChD,OAAQ,SAAS,cAAc,QAAQ,CACzC,EAEA,SAASC,EAAoBC,EAAS,CAClCC,EAAS,KAAK,CACV,MAAO,IACP,QAASD,EACT,aAAc,QACd,gBAAiB,MACjB,QAAS,IACT,SAAU,QAClB,CAAK,CACL,CAEA,SAASE,EAAiBF,EAASG,EAAiB,CAClDF,EAAS,KAAK,CACV,QAASD,EACT,gBAAiBG,EACjB,SAAU,UAChB,CAAG,CACH,CAEA,SAASC,EAAa,CAAE,MAAAd,EAAO,KAAAe,EAAM,OAAAC,CAAM,EAAI,CAC7C,IAAIC,EAAe,GAcnB,OAZI,CAACjB,GAASA,EAAQ,KACpBiB,GAAgBb,EAAqB,QAAS,EAAE,EAAI,SAGlD,CAACW,GAAQA,EAAO,KAClBE,GAAgBb,EAAqB,OAAQ,EAAE,EAAI,SAGjD,CAACY,GAAUA,GAAU,KACvBC,GAAgBb,EAAqB,SAAU,CAAC,EAAI,QAGlDa,EAAa,SAAW,EACnB,IAEPR,EAAoBQ,CAAY,EACzB,GAEX,CAEA,SAASC,GAAiB,CACxBV,EAAS,MAAM,MAAQ,GACvBA,EAAS,KAAK,MAAQ,GACtBA,EAAS,OAAO,MAAQ,EAC1B,CAEA,SAASW,GAA4B,CACnC,MAAMC,EAAMZ,EAAS,OACfa,EAAO,OAAOb,EAAS,MAAM,KAAK,EAAI,OAAOA,EAAS,KAAK,KAAK,EAAI,OAAOA,EAAS,OAAO,KAAK,EACtG,QAAQ,IAAIa,CAAI,EAChBD,EAAI,aAAab,EAAU,EAAE,EAC7B,WAAW,IAAM,CACfa,EAAI,gBAAgBb,CAAQ,CAC7B,EAAEc,CAAI,CACT,CAEA,MAAMC,EAAiBC,GAAQ,CAC7BA,EAAI,eAAc,EAElB,MAAMC,EAAY,CAChB,MAAOhB,EAAS,MAAM,MACtB,KAAMA,EAAS,KAAK,MACpB,OAAQA,EAAS,OAAO,KACzB,EAED,GAAIM,EAAaU,CAAS,EAAG,CAC3BL,IACAD,IAEA,QAASnB,EAAW,EAAGA,GAAY,OAAOyB,EAAU,MAAM,EAAGzB,GAAY,EAAG,CAC1E,MAAMC,EAAQ,OAAOwB,EAAU,KAAK,GAAKzB,EAAW,GAAK,OAAOyB,EAAU,IAAI,EAC9E1B,EAAcC,EAAUC,CAAK,EAC1B,KAAK,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC7BY,EAAiB,uBAAuBb,QAAeC,MAAW,MAAM,CAClF,CAAS,EACA,MAAM,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC9BY,EAAiB,sBAAsBb,QAAeC,MAAW,QAAQ,CACnF,CAAS,CACJ,CACF,CACH,EAEAQ,EAAS,OAAO,iBAAiB,QAASc,CAAa"}