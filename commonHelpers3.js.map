{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({position, delay});        \n      } else {\n        reject({position, delay});        \n      }\n    }, delay);\n  });\n\n  return promise;\n}\n\nfunction getValidationMessage(name, value) {\n  return `'${name}' must be not empty and more than ${value}!`;\n} \n\nconst elements = {\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  button: document.querySelector('button')\n}\n\nfunction showValidationAlert(message) {\n    iziToast.show({\n        title: '⛔',\n        message: message,\n        messageColor: 'white',\n        backgroundColor: 'red',\n        timeout: 5000,\n        position: 'center'\n    });\n}\n\nfunction showPromiseAlert(message, backgroundColor) {\n  iziToast.show({\n      message: message,\n      backgroundColor: backgroundColor,\n      position: 'topRight'\n  });\n}\n\nfunction isInputValid({ delay, step, amount }) {\n  let errorMessage = \"\";\n\n  if (!delay || delay < 0) {\n    errorMessage += getValidationMessage(\"delay\", -1) + \"<br>\"\n  }\n  \n  if (!step || step < 0) {\n    errorMessage += getValidationMessage(\"step\", -1) + \"<br>\"\n  }\n  \n  if (!amount || amount <= 0) {\n    errorMessage += getValidationMessage(\"amount\", 0) + \"<br>\"\n  }\n  \n  if (errorMessage.length === 0) {\n    return true;\n  } else {\n    showValidationAlert(errorMessage);\n    return false;\n  }\n}\n\nconst onButtonClick = (evt) => {\n  evt.preventDefault();\n  \n  const userInput = {\n    delay: elements.delay.value,\n    step: elements.step.value,\n    amount: elements.amount.value\n  }\n\n  if (isInputValid(userInput)) {\n    for (let position = 1; position <= Number(userInput.amount); position += 1) {\n      const delay = Number(userInput.delay) + (position - 1) * Number(userInput.step);\n      createPromise(position, delay)\n        .then(({ position, delay }) => {\n          showPromiseAlert(`✅ Fulfilled promise ${position} in ${delay}ms`, 'lime');\n        })\n        .catch(({ position, delay }) => {\n          showPromiseAlert(`❌ Rejected promise ${position} in ${delay}ms`, 'tomato');\n        });\n    }\n  }\n}\n\nelements.button.addEventListener('click', onButtonClick);\n"],"names":["createPromise","position","delay","shouldResolve","resolve","reject","getValidationMessage","name","value","elements","showValidationAlert","message","iziToast","showPromiseAlert","backgroundColor","isInputValid","step","amount","errorMessage","onButtonClick","evt","userInput"],"mappings":"wIAIA,SAASA,EAAcC,EAAUC,EAAO,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GAYtC,OAVgB,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC/C,WAAW,IAAM,CACXF,EACFC,EAAQ,CAAC,SAAAH,EAAU,MAAAC,CAAK,CAAC,EAEzBG,EAAO,CAAC,SAAAJ,EAAU,MAAAC,CAAK,CAAC,CAE3B,EAAEA,CAAK,CACZ,CAAG,CAGH,CAEA,SAASI,EAAqBC,EAAMC,EAAO,CACzC,MAAO,IAAID,sCAAyCC,IACtD,CAEA,MAAMC,EAAW,CACf,MAAO,SAAS,cAAc,gBAAgB,EAC9C,KAAM,SAAS,cAAc,eAAe,EAC5C,OAAQ,SAAS,cAAc,iBAAiB,EAChD,OAAQ,SAAS,cAAc,QAAQ,CACzC,EAEA,SAASC,EAAoBC,EAAS,CAClCC,EAAS,KAAK,CACV,MAAO,IACP,QAASD,EACT,aAAc,QACd,gBAAiB,MACjB,QAAS,IACT,SAAU,QAClB,CAAK,CACL,CAEA,SAASE,EAAiBF,EAASG,EAAiB,CAClDF,EAAS,KAAK,CACV,QAASD,EACT,gBAAiBG,EACjB,SAAU,UAChB,CAAG,CACH,CAEA,SAASC,EAAa,CAAE,MAAAb,EAAO,KAAAc,EAAM,OAAAC,CAAM,EAAI,CAC7C,IAAIC,EAAe,GAcnB,OAZI,CAAChB,GAASA,EAAQ,KACpBgB,GAAgBZ,EAAqB,QAAS,EAAE,EAAI,SAGlD,CAACU,GAAQA,EAAO,KAClBE,GAAgBZ,EAAqB,OAAQ,EAAE,EAAI,SAGjD,CAACW,GAAUA,GAAU,KACvBC,GAAgBZ,EAAqB,SAAU,CAAC,EAAI,QAGlDY,EAAa,SAAW,EACnB,IAEPR,EAAoBQ,CAAY,EACzB,GAEX,CAEA,MAAMC,EAAiBC,GAAQ,CAC7BA,EAAI,eAAc,EAElB,MAAMC,EAAY,CAChB,MAAOZ,EAAS,MAAM,MACtB,KAAMA,EAAS,KAAK,MACpB,OAAQA,EAAS,OAAO,KACzB,EAED,GAAIM,EAAaM,CAAS,EACxB,QAASpB,EAAW,EAAGA,GAAY,OAAOoB,EAAU,MAAM,EAAGpB,GAAY,EAAG,CAC1E,MAAMC,EAAQ,OAAOmB,EAAU,KAAK,GAAKpB,EAAW,GAAK,OAAOoB,EAAU,IAAI,EAC9ErB,EAAcC,EAAUC,CAAK,EAC1B,KAAK,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC7BW,EAAiB,uBAAuBZ,QAAeC,MAAW,MAAM,CAClF,CAAS,EACA,MAAM,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC9BW,EAAiB,sBAAsBZ,QAAeC,MAAW,QAAQ,CACnF,CAAS,CACJ,CAEL,EAEAO,EAAS,OAAO,iBAAiB,QAASU,CAAa"}